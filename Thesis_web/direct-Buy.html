<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Directly Purchase Center</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex">
    <!-- Google fonts - Playfair Display-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Playfair+Display:400,400i,700">
    <!-- owl carousel-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Lightbox -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/glightbox/3.3.0/css/glightbox.min.css" integrity="sha512-T+KoG3fbDoSnlgEXFQqwcTC9AdkFIxhBlmoaFqYaIjq2ShhNwNao9AKaLUPMfwiBPL0ScxAtc+UYbHAgvd+sjQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Choice -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="https://demo.bootstrapious.com/sell/2-0-1/css/style.default.7acfaf01.css" id="theme-stylesheet">
    <link rel="stylesheet" href="assets/css/vendor/theme.min.css">
    <!-- Favicon -->
    <link rel="shortcut icon" href="assets/images/favicon.png">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="assets/css/vendor/fontawesome.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="assets/css/index.css">
    <style>

        .product-hover-overlay-buttons a {
            display: inline-block; 
            margin: 0 5px; 
            transition: all 0.3s ease;
        }

        .btn-product-left.add-to-wishlist {
            color: #d63384;
        }

        .btn-product-left.add-to-wishlist:hover {
            background-color: #d63384;
            color: #fff;
        }

        .btn-product-left {
            color: #007bff; 
        }

        .btn-product-left:hover {
            background-color: #007bff;
            color: #fff;
        }

        .btn-product-right {
            color: #28a745; 
        }

        .btn-product-right:hover {
            background-color: #28a745;
            color: #fff;
        }

        .sidebar {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .sidebar-block {
            margin-bottom: 20px;
        }

        .search-box input[type="text"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1); 
        }

        .search-box input[type="text"]:focus {
            border-color: #66afe9;
            outline: none;
        }

        .sorting-buttons button {
            width: 100%;
            padding: 10px;
            color: #495057;
            background-color: #e9ecef; 
            border: 1px solid #ced4da; 
            border-radius: 4px;
            transition: all 0.3s ease-in-out;
        }

        .sorting-buttons button:hover {
            background-color: #dae0e5;
            border-color: #adb5bd;
        }

        .mb-2, .mb-4 {
            margin-bottom: 1.5rem;
        }


        
        @media (min-width:1200px) {
            .navbar .dropdown-menu.show {
                display: block;
                opacity: 1;
                visibility: visible;
                transform: translate(-50%);
                transition: all .3s ease-in-out;
            }

            .navbar .dropdown-menu {
                margin-top: 0;
                border-radius: 0;
                border: none;
                background-color: #fff;
                width: 100%;
                left: 50%;
                right: auto;
                text-align: center;
                transform: translateX(-50%);
                transition: all .3s ease-in-out;
            }

            [data-bs-theme="dark"] .navbar-nav .nav-link.active,
            [data-bs-theme="dark"] .dropdown-menu
            {
                background-color: #1E293B !important;
            }

            [data-bs-theme="dark"] .navbar-nav .nav-link:hover {
                background-color: #1E293B !important;
                
            }

            [data-bs-theme="dark"] .dropdown-menu .dropdown-item {
            color: #475569 !important; 
            }

            [data-bs-theme="dark"] .dropdown-menu .dropdown-item:hover {
            color: #8B3DFF !important;
            }
        }
    </style>
</head>

<body>
    <header class="header">
        <!-- Top Bar-->
        <div class="top-bar">
            <div class="container-fluid">
                <div class="row d-flex align-items-center">
                    <div class="col-sm-7 d-none d-sm-block">
                        <ul class="list-inline topbar-text mb-0 d-flex justify-content-end">
                            <li class="list-inline-item px-3">Free shipping on orders over $150</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- Top Bar End-->
        <!-- Navbar-->
        <nav class="navbar navbar-expand-lg navbar-sticky navbar-airy navbar-light bg-white">
            <div class="container-fluid">
                <!-- Navbar Header  -->
                <a href="index.html"><img src="assets/images/logo.png" alt="Logo" width="200"></a>

                <!-- Navbar Collapse -->
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
                    aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mx-auto">
                        <li class="nav-item"><a class="nav-link " href="index.html">Home</a></li>
                        <li class="nav-item"><a class="nav-link" href="blind-Box.html">Blind Box</a>
                        <li class="nav-item"><a class="nav-link active" href="direct-Buy.html">Shop</a></li>
                        <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
                        <li class="nav-item" id="adminPageLink" style="display: none;"><a class="nav-link" href="AdminHomepage.html">Admin Home</a></li>
                    </ul>

                    <div class="d-flex align-items-center justify-content-between justify-content-lg-end mt-1 mb-2 my-lg-0">

                        <div class="nav-item">
                            <div class="color-modes position-relative ps-3">
                                <a class="bd-theme btn btn-link nav-link dropdown-toggle d-inline-flex align-items-center justify-content-center text-primary p-0 position-relative rounded-circle"
                                    href="#" aria-expanded="true" data-bs-toggle="dropdown" data-bs-display="static"
                                    aria-label="Toggle theme (light)">
                                    <i class="fa-regular fa-sun"></i>
                                </a>

                                <ul class="dropdown-menu dropdown-menu-end fs-14px" data-bs-popper="static">
                                    <li>
                                        <button type="button" class="dropdown-item d-flex align-items-center active"
                                            data-bs-theme-value="light" aria-pressed="true">
                                            <i class="fa-regular fa-sun me-4 opacity-50 theme-icon"></i>
                                            Light
                                            <i class="fa-solid fa-check ms-auto d-none"></i>
                                        </button>

                                    </li>
                                    <li>
                                        <button type="button" class="dropdown-item d-flex align-items-center"
                                            data-bs-theme-value="dark" aria-pressed="false">
                                            <i class="fa-solid fa-moon me-4 opacity-50 theme-icon"></i>
                                            Dark
                                            <i class="fa-solid fa-check ms-auto d-none"></i>
                                        </button>

                                    </li>
                                </ul>
                            </div>
                        </div>


                        <div class="nav-item login-margin" id="userAccount">
                            <!-- 登录链接 -->
                            <a class="navbar-icon-link" href="user-login.html" id="userLoginLink">
                                <i class="far fa-user"></i>
                            </a>
                        </div>

                        <!-- Offcanvas Cart Trigger -->
                        <div class="nav-item">
                            <a class="navbar-icon-link" href="#" data-bs-toggle="offcanvas" data-bs-target="#offcanvasCart" aria-controls="offcanvasCart">
                                <i class="fas fa-shopping-cart"></i>
                                <div class="navbar-icon-link-badge" id="cart-badge">0</div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
        <!-- /Navbar -->

        <!-- Offcanvas Cart -->
        <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasCart" aria-labelledby="offcanvasCartLabel">
            <div class="offcanvas-header">
                <h5 id="offcanvasCartLabel">Cart</h5>
                <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <ul class="minicart-product-list">
                    <!-- Add items to the cart -->
                </ul>

                <!-- Total Price -->
                <div class="navbar-cart-total">
                    <span class="text-uppercase text-muted">Total</span>
                    <strong class="text-uppercase" id="navBar-total">$00.00</strong>
                </div>
                <!-- Buttons -->
                <div class="buttons">
                    <a href="#" id="viewCartButton" class="btn btn-dark btn-hover-primary">view cart</a>
                    <a href="#" id="checkoutButton" class="btn btn-outline-dark">checkout</a>
                </div>
                <p class="minicart-message" style="text-align: center; margin-top: 20px;">Free Shipping on All Orders Over $100!</p>
            </div>
        </div>


    </header>
    <!-- Navbar end -->

    <!-- Main Content -->
    <!-- Hero Section-->
    <section class="hero">
        <div class="container">
            <!-- Breadcrumbs -->
            <ol class="breadcrumb justify-content-center mt-4">
                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                <li class="breadcrumb-item active">Purchase Fancy</li>
            </ol>
            <!-- Hero Content-->
            <div class="hero-content pb-5 text-center">
                <h1 class="hero-heading">Discover artworks</h1>
                <div class="row">
                    <div class="col-xl-8 offset-xl-2">
                        <p class="lead text-muted">Here, you can purchase captivating artwork from amazing artists that
                            make your heart skip a beat.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Hero Section End -->

    

    <!-- All Products Section -->
    <div class="container mb-8">
        <!-- Shop Toolbar Start -->
        <div class="shop-toolbar border-bottom">
            <div class="row">
                <!-- Isotop Filter Start -->
                <div class="col-md col-12 align-self-center">
                    <div class="shop-product-filter" data-target="#shop-products">
                        <button class="active" data-filter="*">All Artworks</button>
                        <button data-filter=".abstract">Abstrat Art</button>
                        <button data-filter=".digital">Digital</button>
                        <button data-filter=".painting">Paintings</button>
                        <button data-filter=".nft">NFT</button>
                        <button data-filter=".physical">Physical</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Shop Toolbar End -->

        <div class="section products-mt-70">
            <div class="container">

                <div class="row">

                    <!-- Grid -->
                    <div class="products-grid col-xl-9 col-lg-8 order-lg-2">

                        <!-- Products Grid -->
                        <div id="shop-products" class="products row row-cols-xl-4 row-cols-md-3 row-cols-sm-2 row-cols-1">
                            <!-- Artworks will be dynamically inserted here by JavaScript -->


                        </div>

                        <!-- Pagination-->
                        <nav class="d-flex justify-content-center mb-5 mt-3" aria-label="page navigation">
                            <ul class="pagination">
                                <!-- Pagination buttons will be dynamically inserted here by JavaScript -->
                            </ul>
                        </nav>
                            
                    </div>


                    <!-- Sidebar-->
                    <div class="sidebar col-xl-3 col-lg-4 order-lg-1">
                        <div class="sidebar-block px-3 px-lg-0 me-lg-4">
                             <!-- Search Box -->
                             <div class="search-box mb-4">
                                <input type="text" id="search-input" placeholder="Search for artwork..." class="form-control">
                            </div>
                            <!-- Sorting Buttons -->
                            <div class="sorting-buttons mb-4">
                                <button id="sort-low-to-high" class="btn btn-outline-primary mb-2">Price: Low to High</button>
                                <button id="sort-high-to-low" class="btn btn-outline-primary mb-2">Price: High to Low</button>
                            </div>
                        </div>
                        
                    </div>
                    <!-- /Sidebar end-->
                </div>
            </div>
        </div>
    </div>


    <!-- Footer -->
    <footer class="main-footer">
        <!-- Services block-->
        <div class="service-block bg-gray-100 text-dark-700 py-6">
            <div class="container">
                <div class="row">
                    <div class="col-lg-4 service-column">
                        <i class="fas fa-shipping-fast fa-3x service-icon"></i>
                        <div class="service-text">
                            <h6 class="text-uppercase">Free shipping &amp; return</h6>
                            <p class="text-muted fw-light text-sm mb-0">Free Shipping over $150</p>
                        </div>
                    </div>
                    <div class="col-lg-4 service-column">
                        <i class="fas fa-money-bill-wave fa-3x service-icon"></i>
                        <div class="service-text">
                            <h6 class="text-uppercase">Money back guarantee</h6>
                            <p class="text-muted fw-light text-sm mb-0">30 Days Money Back Guarantee</p>
                        </div>
                    </div>
                    <div class="col-lg-4 service-column">
                        <i class="fas fa-headset fa-3x service-icon"></i>
                        <div class="service-text">
                            <h6 class="text-uppercase">000-800-056-000</h6>
                            <p class="text-muted fw-light text-sm mb-0">Available Support </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Main block - menus, subscribe form-->
        <div class="footer-main py-6 bg-gray-300 text-muted">
            <div class="container">
                <div class="row">
                    <div class="col-lg-4 mb-5 mb-lg-0">
                        <div class="fw-bold text-uppercase text-lg text-dark mb-3">
                            Blend
                            <span class="text-primary">.</span>
                            Art
                        </div>
                        <p>Purchase directly what you fancy Or Try the Blind Box to get a surprise.</p>
                        <ul class="list-inline">
                            <li class="list-inline-item"><a class="text-muted text-primary-hover" href="#"
                                    target="_blank" title="twitter"><i class="fab fa-twitter"></i></a>
                            </li>
                            <li class="list-inline-item"><a class="text-muted text-primary-hover" href="#"
                                    target="_blank" title="facebook"><i class="fab fa-facebook"></i></a>
                            </li>
                            <li class="list-inline-item"><a class="text-muted text-primary-hover" href="#"
                                    target="_blank" title="instagram"><i class="fab fa-instagram"></i></a>
                            </li>
                        </ul>
                    </div>
                    <div class="col-lg-2 col-md-6 mb-5 mb-lg-0">
                        <h6 class="text-uppercase text-dark mb-3">Shop</h6>
                        <ul class="list-unstyled">
                            <li> <a class="text-muted" href="direct-Buy.html">Directly Purchase</a></li>
                            <li> <a class="text-muted" href="blind-Box.html">For Blind Box</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-2 col-md-6 mb-5 mb-lg-0">
                        <h6 class="text-uppercase text-dark mb-3">Easy-going</h6>
                        <ul class="list-unstyled">
                            <li> <a class="text-muted" href="user-wishlist.html">Wishlist </a></li>
                            <li> <a class="text-muted" href="user-checkout-overview.html">Checkouts </a></li>
                        </ul>
                    </div>
                    <div class="col-lg-4">
                        <h6 class="text-uppercase text-dark mb-3">Daily Offers & Discounts</h6>
                        <p class="mb-3"> Want to get newsletter in time? Subscribe our website!</p>
                        <form id="newsletter-form" action="https://api.web3forms.com/submit" method="POST">
                            <input type="hidden" name="access_key" value="24108a2c-9516-495b-b4dd-b7bc69a8d0e4">

                            <div class="input-group mb-3">
                                <input class="form-control bg-transparent border-secondary " type="email" name="email" placeholder="Your Email Address" aria-label="Your Email Address" style="margin-right: 10px;">

                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary border-start-0" type="submit">
                                        <i class="fa fa-paper-plane text-lg text-dark"></i>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- Copyright section of the footer-->
        <div class="py-4 fw-light footer-botton text-gray-300">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-6 text-center text-md-start">
                        <p class="mb-md-0">&copy; 2024 ELTE Thesis. All rights reserved.</p>
                    </div>
                    <div class="col-md-6">
                        <ul class="list-inline mb-0 mt-2 mt-md-0 text-center text-md-end">
                            <li class="list-inline-item"><img class="w-2rem" src="assets/images/visa.svg" alt="visa">
                            </li>
                            <li class="list-inline-item"><img class="w-2rem" src="assets/images/mastercard.svg"
                                    alt="mastercard"></li>
                            <li class="list-inline-item"><img class="w-2rem" src="assets/images/paypal.svg"
                                    alt="paypal"> </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- /Footer end-->

    <!-- Back to top button-->
    <div id="scrollTop">
        <i class="fa fa-long-arrow-alt-up"></i>
    </div>

    <!-- JavaScript files-->
    <!-- jQuery-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js" integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.0/js/jquery.nice-select.min.js" integrity="sha512-Q27qmhQTPA7DBhZVnJnSovHMSbhSBaUMsY3nzQeCHaxbAE7AM4HD7+tdWeA6JtgZBXlHd6jYVa3QKlPDf33MsA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- Bootstrap JavaScript Bundle (Popper.js included)-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.bundle.min.js" integrity="sha512-7Pi/otdlbbCR+LnW+F7PwFcSDJOuUJB3OxtEHbg4vSMvzvJjde4Po1v4BR9Gdc9aXNUNFVUY+SK51wWT8WF0Gg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- Owl Carousel-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js" integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- Smooth scrolling-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/smooth-scroll/16.1.3/smooth-scroll.polyfills.min.js" integrity="sha512-LZ6YBzwuQvIG41twjliX3HUVeAd+ErnJ0UsqRnkI4firX2l71jxbKJoax/hu7XY2tiyLl0YA2kcnz/XEW+9O3g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- Lightbox gallery-->
    <script src="assets/js/vendor/glightbox.min.js"></script>
    <!-- Choice -->
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
    <!-- Object Fit Images - Fallback for browsers that don't support object-fit-->
    <script src="assets/js/vendor/ofi.min.js"></script>
    <script> var basePath = ''; </script>
    <script src="assets/js/theme.js"></script>
    <script src="assets/js/vendor/jquery.cookie.js"></script>
    <script src="assets/js/index.js"></script>
    <script src="assets/js/vendor/fontAwesome.js"></script>
    <script src="assets/js/cart.js"></script>
    
    <script>

        document.addEventListener('DOMContentLoaded', function() {
            let currentPage = 1;
            const itemsPerPage = 8;
            let allArtworks = [];
            let currentFilter = '*';
            let currentSort = 'default'; // 'default', 'low-to-high', 'high-to-low'

            fetchArtworks();

            const searchInput = document.getElementById('search-input');
            searchInput.addEventListener('input', function() {
                currentPage = 1;
                updateDisplay();
            });

            document.getElementById('sort-low-to-high').addEventListener('click', function() {
                currentSort = 'low-to-high';
                updateDisplay();
            });

            document.getElementById('sort-high-to-low').addEventListener('click', function() {
                currentSort = 'high-to-low';
                updateDisplay();
            });

            const filterButtons = document.querySelectorAll('.shop-product-filter button');
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    currentFilter = this.getAttribute('data-filter');
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    currentPage = 1;
                    updateDisplay();
                });
            });

            function fetchArtworks() {
                fetch('http://localhost:8080/artwork/getAllArtworks')
                .then(response => response.json())
                .then(data => {
                    allArtworks = data;
                    updateDisplay();
                })
                .catch(error => console.error('Error fetching artworks:', error));
            }

            function updateDisplay() {
                const filteredArtworks = applyFiltersAndSearch();
                displayPagination(filteredArtworks.length);
                displayArtworks(getPageArtworks(filteredArtworks, currentPage));
            }

            function applyFiltersAndSearch() {
                let filteredArtworks = allArtworks;
                if (currentFilter !== '*') {
                    filteredArtworks = filteredArtworks.filter(artwork => artwork.type.includes(currentFilter.substring(1)));
                }
                const searchTerm = searchInput.value.toLowerCase();
                if (searchTerm) {
                    filteredArtworks = filteredArtworks.filter(artwork => artwork.title.toLowerCase().includes(searchTerm));
                }
                if (currentSort === 'low-to-high') {
                    filteredArtworks.sort((a, b) => a.price - b.price);
                } else if (currentSort === 'high-to-low') {
                    filteredArtworks.sort((a, b) => b.price - a.price);
                }
                return filteredArtworks;
            }

            function getPageArtworks(artworks, page) {
                const startIndex = (page - 1) * itemsPerPage;
                return artworks.slice(startIndex, startIndex + itemsPerPage);
            }



            function displayArtworks(artworks) {
                const container = document.getElementById('shop-products');
                container.innerHTML = ''; // 清空现有内容
                artworks.forEach(artwork => {
                    const isSold = artwork.user_id !== null;
                    const artworkHtml = `
                        <div class="grid-item col ${artwork.type}" data-type="${artwork.type}">
                            <div class="product">
                                <div class="product-image">
                                    ${isSold ? '<div class="ribbon ribbon-info">Sold</div>' : ''}
                                    <img src="${artwork.image_url}" alt="${artwork.title}" class="img-fluid">
                                    <div class="product-hover-overlay">
                                        <a href="product-detail.html?id=${artwork.id}" class="product-hover-overlay-link"></a>
                                        <div class="product-hover-overlay-buttons">
                                            <a href="javascript:void(0);" class="btn btn-outline-dark btn-product-left d-none d-sm-inline-block add-to-wishlist hintT-top" data-hint="Add to wishlist" data-artwork-id="${artwork.id}"><i class="far fa-heart"></i></a>
                                            <a class="btn btn-outline-dark btn-product-right d-none d-sm-inline-block hintT-top" href="product-detail.html?id=${artwork.id}" data-hint="View">
                                                <i class="fa-search fa"></i>
                                            </a>
                                            ${isSold ? '' : `<button class="btn btn-outline-dark btn-product-left d-none d-sm-inline-block add-to-cart hintT-top" data-artwork-id="${artwork.id}" data-hint="Add to Cart">
                                                <i class="fa fa-shopping-cart"></i>
                                            </button>`}
                                        </div>
                                    </div>
                                </div>
                                <div class="text-center py-2">
                                    <p class="text-muted text-sm mb-1">${artwork.type}</p>
                                    <h3 class="h6 text-uppercase mb-1"><a href="product-detail.html?id=${artwork.id}" class="text-dark">${artwork.title}</a></h3>
                                    <span class="text-muted">$${artwork.price.toFixed(2)}</span>
                                </div>
                            </div>
                        </div>`;
                    container.insertAdjacentHTML('beforeend', artworkHtml);
                });

                // Add event listeners after updating the DOM
                addCartAndWishlistEventListeners();
            }

            function addCartAndWishlistEventListeners() {
                document.querySelectorAll('.add-to-cart').forEach(button => {
                    button.addEventListener('click', function(event) {
                        event.preventDefault();
                        const artworkId = this.getAttribute('data-artwork-id');
                        handleAddToCart(artworkId);
                    });
                });

                document.querySelectorAll('.add-to-wishlist').forEach(button => {
                    button.addEventListener('click', function(event) {
                        event.preventDefault();
                        const artworkId = this.getAttribute('data-artwork-id');
                        handleAddToWishlist(artworkId);
                    });
                });
            }

            function handleAddToCart(artworkId) {
                const userInfoString = localStorage.getItem('userInfo');
                if (userInfoString) {
                    const userInfo = JSON.parse(userInfoString);
                    addToCart(userInfo.id, artworkId);
                } else {
                    alert('Please log in to add items to the cart.');
                    window.location.href = 'user-login.html';
                }
            }

            function handleAddToWishlist(artworkId) {
                const userInfoString = localStorage.getItem('userInfo');
                if (userInfoString) {
                    const userInfo = JSON.parse(userInfoString);
                    addToWishlist(userInfo.id, artworkId);
                } else {
                    alert('Please log in to add items to the wishlist.');
                    window.location.href = 'user-login.html';
                }
            }


            function addToCart(userId, artworkId) {
                fetch('http://localhost:8080/cart/addToCart', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        user_id: userId,
                        artwork_id: artworkId
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.code === 200) {
                        alert('Item added to cart successfully.');
                        location.reload();
                    } else if(data.code === 409){
                        alert('Item already in cart.');
                        location.reload();
                    }else{
                        alert('Failed to add item to cart.');
                    }
                    
                })
                .catch(error => console.error('Error adding item to cart:', error));
            }

            function addToWishlist(userId, artworkId) {
                fetch('http://localhost:8080/wishlist/addToWishlist', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        user_id: userId,
                        artwork_id: artworkId
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.code === 200) {
                        alert('Item added to wishlist successfully.');
                    } else if(data.code === 409){
                        alert('Item already in wishlist.');
                        location.reload();
                    }else{
                        alert('Failed to add item to wishlist.');
                    }
                })
                .catch(error => console.error('Error adding item to wishlist:', error));
            }




            function displayPagination(totalItems) {
                const pageCount = Math.ceil(totalItems / itemsPerPage);
                const paginationContainer = document.querySelector('.pagination');
                paginationContainer.innerHTML = '';
                paginationContainer.innerHTML += `<li class="page-item ${currentPage === 1 ? 'disabled' : ''}">
                                                    <a class="page-link" href="#" onclick="changePage(${currentPage - 1})">Previous</a>
                                                </li>`;
                for (let i = 1; i <= pageCount; i++) {
                    paginationContainer.innerHTML += `<li class="page-item ${i === currentPage ? 'active' : ''}">
                                                        <a class="page-link" href="#" onclick="changePage(${i})">${i}</a>
                                                    </li>`;
                }
                paginationContainer.innerHTML += `<li class="page-item ${currentPage === pageCount ? 'disabled' : ''}">
                                                    <a class="page-link" href="#" onclick="changePage(${currentPage + 1})">Next</a>
                                                </li>`;
            }

            window.changePage = function(page) {
                if (page < 1 || page > Math.ceil(allArtworks.length / itemsPerPage)) return;
                currentPage = page;
                updateDisplay();
            };
        });


    </script>

    

</body>

</html>